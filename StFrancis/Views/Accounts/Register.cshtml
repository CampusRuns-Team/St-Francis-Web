@model StFrancis.ViewModel.RegisterVm
@{
    ViewData["Title"] = "Register";
    Layout = "~/Views/Shared/_AccountLayout.cshtml";
}
@section Css{
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css">

    <link href="~/css/Form.css" rel="stylesheet" />

}





    <div id="saved-home-main" class="container-fluid" style="margin-bottom: 90px;  margin-top: 50px;">



        <div class="row justify-content-center">
            <div class="col-11 col-sm-10 col-md-10 col-lg-6 col-xl-8 text-center p-0 mt-3 mb-2">
            
                    <h2 id="heading">Parishioner Signup Form</h2>
                    <p>Fill all form field to go to next step</p>
                    <form id="msform">
                        <!-- progressbar -->
                        <ul id="progressbar">
                            <li class="active" id="account"><strong>Account</strong></li>
                            <li id="personal"><strong>Personal</strong></li>
                            <li id="payment"><strong>Image</strong></li>
                            <li id="confirm"><strong>Finish</strong></li>
                        </ul>
                        <div class="progress">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                        </div> <br> <!-- fieldsets -->
                        <fieldset>
                            <div class="form-card">
                                <div class="row">
                                    <div class="col-7">
                                        <h2 class="fs-title">Account Information:</h2>
                                    </div>
                                    <div class="col-5">
                                        <h2 class="steps">Step 1 - 4</h2>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <label>Surname<span class="text-danger">*</span></label>
                                        <input asp-for="Surname" required id="surname" name="surname" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text" placeholder="Your surname">
                                    </div>
                                    <div class="col-6">
                                        <label>Other Names<span class="text-danger">*</span></label>
                                        <input asp-for="OtherNames" required id="othname" name="othname" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text" placeholder="Other names">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        <label>Email</label><span class="text-danger">*</span>
                                        <input asp-for="Email" required id="email" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="email" placeholder="Email Address">

                                    </div>

                                    <div class="col-6">
                                        <label>Phone Number<span class="text-danger">*</span></label>
                                        <input asp-for="PhoneNumber" required id="phone" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text" placeholder="Your Phone number here ">

                                    </div>

                                </div>

                                <div class="row">
                                    <div class="col-6">
                                        <label>Gender<span class="text-danger">*</span></label>
                                        <select asp-for="Sex" required id="gender" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text">
                                            <option value="">--Please choose an option--</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                        </select>

                                    </div>

                                    <div class="col-6">
                                        <label>BCC</label>
                                        <select asp-for="BCC" required id="bcc" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text">
                                            <option value="">--Please choose an option--</option>
                                            <option value="Zone1">Zone1 (Ibijoke to Juli)</option>
                                            <option value="Zone2">Zone2 (Ola-Adesega to Under bridge)</option>
                                            <option value="Zone3">Zone3 (Sanyaolu,Olarenwaju to Police post)</option>
                                            <option value="Zone4">Zone4 (Fashade,Oregunwa,Olarenwaju to High School)</option>
                                            <option value="Zone5">Zone5 (Olusosun)</option>
                                            <option value="Zone6">Zone6 (Alausa)</option>
                                            <option value="Zone7">Zone7 (Diaspora)</option>
                                            <option value="OBAJIMI BCC ">OBAJIMI BCC </option>
                                            <option value="FOLAWIYO BCC">FOLAWIYO BCC</option>
                                            <option value="ANAKOYA BCC">ANAKOYA BCC</option>
                                            <option value="TAIKE BCC">TAIKE BCC</option>
                                        </select>


                                    </div>



                                </div>

                                <div class="row">
                                    <div class="col-6">
                                        <label>Am a member of which organisation?</label>
                                        <select asp-for="Organisation" id="org" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text">
                                            <option value="">--Please choose an option--</option>
                                            <option value="CMO">CMO</option>
                                            <option value="CWO">CWO</option>
                                            <option value="CYAA">CYAA</option>
                                            <option value="CYON">CYON</option>
                                            <option value="MCA">MCA</option>
                                        </select>

                                    </div>

                                    <div class="col-6">
                                        <label>I belong to which Society?</label>
                                        <input asp-for="Society" id="society" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text" placeholder="Your society here">

                                    </div>

                                </div>

                                <div class="row">

                                    <div class="col-6">
                                        <label>Worship Center<span class="text-danger">*</span></label>
                                        <select asp-for="WorshipCenter" required id="worship" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text">
                                            <option value="">--Please choose an option--</option>
                                            <option value="St Francis Oregun">St Francis Oregun</option>
                                            <option value="Mother of Perpetual help Ikosi Ketu">Mother of Perpetual help Ikosi Ketu</option>
                                        </select>

                                    </div>

                                    <div class="col-6">
                                        <label>Membership Card Number</label>
                                        <input asp-for="MCardNumber" id="card" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text" placeholder="Your membership card number here">

                                    </div>

                                </div>

                                <div class="row">
                                    <div class="col-12">
                                        <label>Suggestion(s)</label>
                                        <textarea asp-for="Suggestion" id="suggestion" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text" rows="3" placeholder="Let's know your suggestions"></textarea>

                                    </div>



                                </div>

                                <div class="row">
                                    <div class="col-6">
                                        <label>Password<span class="text-danger">*</span></label>
                                        <input asp-for="Password" required id="password" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="password" placeholder="Your password here ">
                                    </div>
                                    <div class="col-6">
                                        <label>Confirm Password<span class="text-danger">*</span></label>
                                        <input asp-for="ConfirmPassword" required id="cpassword" data-rule-equalTo="#password" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3  g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="password" placeholder="Repeat your password ">
                                    </div>
                                </div>


                            </div>
                            <input type="button" name="next" class="next action-button" value="Next" style="margin-right: 20px;" />
                        </fieldset>
                        <fieldset>
                            <div class="form-card">
                                <div class="row">
                                    <div class="col-7">
                                        <h2 class="fs-title">Personal Information:</h2>
                                    </div>
                                    <div class="col-5">
                                        <h2 class="steps">Step 2 - 4</h2>
                                    </div>

                                </div>
                                <div class="row">
                                    <div class="col-12">

                                        <label>Residential Address<span class="text-danger">*</span></label>
                                        <textarea asp-for="Address" id="address" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text" rows="3" placeholder="Your Residential Address"></textarea>

                                    </div>
                                </div>
                                <div class="row">

                                    <div class="col-6">

                                        <label>Date of Birth<span class="text-danger">*</span></label>
                                        <input asp-for="DateOfBirth" required id="dob" class="form-control" type="date" placeholder="Eneter your DOB">

                                    </div>
                                    <div class="col-6">

                                        <label>Occupation<span class="text-danger">*</span></label>
                                        <input asp-for="Occupation" required id="occupation" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text" placeholder="Your occupation here ">

                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6">
                                        <label>State of Origin<span class="text-danger">*</span></label>
                                        <select asp-for="State" required id="state" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text">
                                            <option value="">--Please choose an option--</option>
                                            <option value="Abuja FCT">Abuja FCT</option>
                                            <option value="Abia">Abia</option>
                                            <option value="Adamawa">Adamawa</option>
                                            <option value="Akwa Ibom">Akwa Ibom</option>
                                            <option value="Anambra">Anambra</option>
                                            <option value="Bauchi">Bauchi</option>
                                            <option value="Bayelsa">Bayelsa</option>
                                            <option value="Benue">Benue</option>
                                            <option value="Borno">Borno</option>
                                            <option value="Cross River">Cross River</option>
                                            <option value="Delta">Delta</option>
                                            <option value="Ebonyi">Ebonyi</option>
                                            <option value="Edo">Edo</option>
                                            <option value="Ekiti">Ekiti</option>
                                            <option value="Enugu">Enugu</option>
                                            <option value="Gombe">Gombe</option>
                                            <option value="Imo">Imo</option>
                                            <option value="Jigawa">Jigawa</option>
                                            <option value="Kaduna">Kaduna</option>
                                            <option value="Kano">Kano</option>
                                            <option value="Katsina">Katsina</option>
                                            <option value="Kebbi">Kebbi</option>
                                            <option value="Kogi">Kogi</option>
                                            <option value="Kwara">Kwara</option>
                                            <option value="Lagos">Lagos</option>
                                            <option value="Nassarawa">Nassarawa</option>
                                            <option value="Niger">Niger</option>
                                            <option value="Ogun">Ogun</option>
                                            <option value="Ondo">Ondo</option>
                                            <option value="Osun">Osun</option>
                                            <option value="Oyo">Oyo</option>
                                            <option value="Plateau">Plateau</option>
                                            <option value="Rivers">Rivers</option>
                                            <option value="Sokoto">Sokoto</option>
                                            <option value="Taraba">Taraba</option>
                                            <option value="Yobe">Yobe</option>
                                            <option value="Zamfara">Zamfara</option>
                                            <option value="Outside Nigeria">Outside Nigeria</option>
                                        </select>
                                        @*<input asp-for="State" required id="state" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text" placeholder="Your State of Origin">*@
                                    </div>
                                    <div class="col-6">

                                        <label>Nature of Work/Business<span class="text-danger">*</span></label>
                                        <input asp-for="NatureOfWork" required id="business" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text" placeholder="Your nature of work/business here ">

                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-6">
                                        <label>Marital Status<span class="text-danger">*</span></label>
                                        <select asp-for="MaritalStatus" required id="maritalstatus" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="text">
                                            <option value="">--Please choose an option--</option>
                                            <option value="Single">Single</option>
                                            <option value="Married">Married</option>
                                        </select>
                                    </div>

                                </div>




                            </div>
                            <input type="button" name="next" class="next action-button" value="Next" style="margin-right: 20px;" /> <input type="button" name="previous" class="previous action-button-previous" value="Previous" style="margin-right: 20px;" />
                        </fieldset>
                        <fieldset>
                            <div class="form-card">
                                <div class="row">
                                    <div class="col-7">
                                        <h2 class="fs-title">Image Upload:</h2>
                                    </div>
                                    <div class="col-5">
                                        <h2 class="steps">Step 3 - 4</h2>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-12">

                                        <label>Profile Picture<span class="text-danger">*</span></label>
                                        <input id="picture" class="form-control g-color-black g-bg-white g-bg-white--focus g-brd-gray-light-v3 g-brd-primary--hover rounded-0 g-py-6 g-px-15" type="file" placeholder="Upload your picture">

                                    </div>

                                </div>

                                <div class="row">
                                    <div class="col-6">

                                        <button style="background-color: #5a233a;" id="btnsubmit" class="btn  btn-primary prevBtn btn-md  ml-auto " type="button">Register</button>

                                    </div>


                                    <div class="col-6">

                                        <p>Already have an acount?</p>

                                        <a class="pull-right" style="margin-top: -48px" ; href="/accounts/login">Login</a>

                                    </div>


                                </div>
                            </div>
                            <input type="button" name="next" class="next action-button" value="Submit" /> <input type="button" name="previous" class="previous action-button-previous" value="Previous" />

                        </fieldset>
                        @*<fieldset>
            <div class="form-card">
                <div class="row">
                    <div class="col-7">
                        <h2 class="fs-title">Finish:</h2>
                    </div>
                    <div class="col-5">
                        <h2 class="steps">Step 4 - 4</h2>
                    </div>
                </div> <br><br>
                <h2 class="purple-text text-center"><strong>SUCCESS !</strong></h2> <br>
                <div class="row justify-content-center">
                    <div class="col-3"> <img src="https://i.imgur.com/GwStPmg.png" class="fit-image"> </div>
                </div> <br><br>
                <div class="row justify-content-center">
                    <div class="col-7 text-center">
                        <h5 class="purple-text text-center">You Have Successfully Signed Up</h5>
                    </div>
                </div>
            </div>
        </fieldset>*@
                        <!-- Image loader -->
                        <div id='loader' style='display: none;'>
                            <img src='~/img/reload.gif' width='32px' height='32px'>
                        </div>
                        <!-- Image loader -->

                        
                    </form>
                </div>
            
        </div>
    </div>

@section Scripts{

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="~/js/Steps.js"></script>

    <script>



        $("#btnsubmit").click(function (e) {
            //if (registerForm.validate()) {
                var data = new FormData();
                var file = $("#picture")[0].files[0];
                data.append('Surname', $("#surname").val());
                data.append('OtherNames', $("#othname").val());
                data.append('Email', $("#email").val());
                data.append('PhoneNumber', $("#phone").val());
                data.append('Sex', $("#gender").val());
                data.append('BCC', $("#bcc").val());
                data.append('Organisation', $("#org").val());
                data.append('Society', $("#society").val());
                data.append('WorshipCenter', $("#worship").val());
                data.append('MCardNumber', $("#card").val());
                data.append('Suggestion', $("#suggestion").val());
                data.append('ConfirmPassword', $("#cpassword").val());
                data.append('Password', $("#password").val());

                data.append('Address', $("#address").val());
                data.append('DateOfBirth', $("#dob").val());
                data.append('Occupation', $("#occupation").val());
                data.append('State', $("#state").val());
                data.append('NatureOfWork', $("#business").val());
                data.append('MaritalStatus', $("#maritalstatus").val());

                data.append('image', file);
                
                

                $.ajax({
                    url: "/accounts/register",
                    type: "POST",
                    data: data,
                    contentType: false,
                    processData: false,
                    beforeSend: function () {
                        // Show image container
                        $("#loader").show();
                    },
                    success: function (res) {
                        if (res.status) {
                            clearForm();
                            swal('Registration Successful!', res.data, 'success');
                            clearForm();
                            return;
                        }
                        swal('Error', res.data, 'error');
                    },
                    error: function (err) {
                        swal('Error', "Oops! An error occured while processing your request.", 'error');
                    },
                    complete: function (data) {
                        // Hide image container
                        $("#loader").hide();
                    }
                })

           // }


        })


        function clearForm() {
            $("#email").val('');
            $("#phone").val('');
            $("#state").val('');
            $("#surname").val('');
            $("#org").val('');
            $("#suggestion").val('');
            $("#bcc").val('');
            $("#society").val('');
            $("#business").val('');
            $("#worship").val('');
            $("#occupation").val('');
            $("#card").val('');
            $("#maritalstatus").val('');
            $("#othname").val('');
            $("#cpassword").val('');
            $("#password").val('');
            $("#gender").val('');
            $("#dob").val('');
            $("#address").val('');
            $("#picture").val('');

        }

        var registerForm = $("#msform");
        registerForm.validate({

            rules: {
                // The key name on the left side is the name attribute
                // of an input field. Validation rules are defined
                // on the right side
                surname: "required",
                othname: "required",
                email: {
                    required: true,
                    // Specify that email should be validated
                    // by the built-in "email" rule
                    email: true
                },
                password: {
                    required: true,
                    minlength: 5
                }
            },
            // Specify validation error messages

            messages: {

                surname: "Please enter your firstname",
                othname: "Please enter your lastname",
                cpassword: {
                    equalTo: "Passwords do not match",
                }

               
            },

            submitHandler: function (form) {
                form.submit();
            }

             
        });

    </script>
}
